<section class="login">
  <div class="container">


    <div class="login-heading ">
      <img src="./assets/imgs/logo.svg" class="img-fluid" alt="">
    </div>


    <div class="login-about">
      <div class="col-12">
        <div class="login-head">
          <h3>User Management System</h3>
        </div>
      </div>


      <form class="form" [formGroup]="loginForm" (ngSubmit)="loginSubmit()">

        <div class="form-head">
          <h5>Sign In </h5>
          <p>Enter Your credentials to access your account</p>
        </div>
        <div class="form-info">
          <label for="email">Email:</label>
          <input type="email" id="email" class="form-control" formControlName="email"
            placeholder="enter your email here ...." [ngClass]="{
            'is-valid' : !loginForm.get('email')?.errors && (loginForm.get('email')?.touched ||loginForm.get('email')?.dirty) ,
            'is-invalid' : loginForm.get('email')?.errors && (loginForm.get('email')?.touched ||loginForm.get('email')?.dirty)
          }">

          @if (loginForm.get("email")?.errors && loginForm.get("email")?.touched) {
          <div class="alert alert-danger">
            @if (loginForm.get("email")?.getError("required")) {
            <p>Email is required</p>
            }


            @else if (loginForm.get("email")?.getError("email")) {
            <p>Please enter a valid email address</p>
            }
          </div>
          }
        </div>



        <div class="form-info">
          <label for="password">Password:</label>
          <input type="password" id="password" class="form-control" formControlName="password"
            placeholder="enter your password ..." [ngClass]="{
            'is-valid' : !loginForm.get('password')?.errors && (loginForm.get('password')?.touched ||loginForm.get('password')?.dirty) ,
            'is-invalid' : loginForm.get('password')?.errors && (loginForm.get('password')?.touched ||loginForm.get('password')?.dirty)
           }">

          @if (loginForm.get("password")?.errors && loginForm.get("password")?.touched) {

          <div class="alert alert-danger">
            @if (loginForm.get("password")?.getError("required")) {
            <p> Password is required</p>
            }

            @else if (loginForm.get("password")?.getError("pattern")) {
            <p>Password must be 8-20 characters long and contain only lowercase letters and numbers</p>
            }
          </div>
          }
        </div>



        <div class="form-info">
          <ul>
            <li><a routerLink="/register"> RegsiterAsUser?</a>
            </li>
            <li><a routerLink="/loginAdmin"> LoginAsAdmin?</a></li>
          </ul>
        </div>

        <button class="btn"> Sign in 
          @if (isLoading()) {
            <span> <i class="fas fa-spin fa-spinner"></i></span>
          }
        </button>
      </form>
    </div>
  </div>
</section>
